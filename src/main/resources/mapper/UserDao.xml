<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.dhu.dao.UserDao">
    <select id="userSelectById" resultType="User">
        select *
        from user
        where userId = #{userId}
    </select>
    <select id="getUserNameById" resultType="java.lang.String">
        select userName
        from user
        where userId = #{userId}
    </select>

    <insert id="userInsert">
        insert into user
        values (#{userId}, #{userPassword}, #{userImg}, #{userName}, #{userSex}, #{userLife}, #{userTime}, #{userMajor},
                #{userIntroduction})
    </insert>

    <update id="closeUser">
        update user
        set userLife=1
        where userId = #{userId}
    </update>

    <update id="updateUserInfo">
        update user
        <trim prefix="set" suffixOverrides=",">
            <if test="userImg!=null and userImg!=''">
                userImg=#{userImg},
            </if>
            <if test="userName!=null and userName!=''">
                userName=#{userName},
            </if>
            <if test="userSex!=null and userSex!=''">
                userSex=#{userSex},
            </if>
            <if test="userMajor!=null and userMajor!=''">
                userMajor=#{userMajor},
            </if>
            <if test="userIntroduction!=null and userIntroduction!=''">
                userIntroduction=#{userIntroduction},
            </if>
        </trim>
        where userId = #{userId}
    </update>

    <update id="updateUserPwd">
        update user
        set userPassword=#{userPassword}
        where userId = #{userId}
    </update>
</mapper>